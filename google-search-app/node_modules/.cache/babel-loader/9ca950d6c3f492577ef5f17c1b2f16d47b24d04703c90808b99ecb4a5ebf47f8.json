{"ast":null,"code":"/**\r\n * Parse query to determine what type of special card to show\r\n */\n\n// Check if query is asking for weather\nexport const isWeatherQuery = query => {\n  const q = query.toLowerCase().trim();\n  return q.includes('weather') || q.startsWith('weather in') || q.endsWith('weather');\n};\n\n// Extract city from weather query\nexport const extractCity = query => {\n  const q = query.toLowerCase().trim();\n  // \"weather in chicago\" or \"chicago weather\"\n  let city = q.replace(/weather/gi, '').replace(/in/gi, '').trim();\n  return city || 'New York'; // default\n};\n\n// Check if query is a math expression\nexport const isMathQuery = query => {\n  const q = query.trim();\n  // Only allow digits, operators, parentheses, spaces, decimal points\n  const mathPattern = /^[\\d\\s+\\-*/().]+$/;\n  if (!mathPattern.test(q)) return false;\n  // Must have at least one operator\n  return /[+\\-*/]/.test(q);\n};\n\n// Safely evaluate math expression (no eval!)\nexport const evaluateMath = query => {\n  try {\n    const q = query.trim();\n    // Validate again\n    if (!/^[\\d\\s+\\-*/().]+$/.test(q)) return null;\n\n    // Use Function constructor with strict validation\n    // This is safer than eval but still evaluates only math\n    const sanitized = q.replace(/[^0-9+\\-*/().]/g, '');\n\n    // Additional safety: check for balanced parentheses\n    let depth = 0;\n    for (const char of sanitized) {\n      if (char === '(') depth++;\n      if (char === ')') depth--;\n      if (depth < 0) return null;\n    }\n    if (depth !== 0) return null;\n\n    // Evaluate using Function (safer than eval, no access to scope)\n    const result = new Function(`return (${sanitized})`)();\n    if (typeof result !== 'number' || !isFinite(result)) return null;\n    return result;\n  } catch {\n    return null;\n  }\n};\n\n// Check if query is asking for time\nexport const isTimeQuery = query => {\n  const q = query.toLowerCase().trim();\n  return q.startsWith('time in') || q.startsWith('what time') || q.includes('current time');\n};\n\n// Extract location from time query\nexport const extractTimeLocation = query => {\n  const q = query.toLowerCase().trim();\n  return q.replace(/time in/gi, '').replace(/what time/gi, '').replace(/current time/gi, '').replace(/is it in/gi, '').trim() || 'UTC';\n};\n\n// Check if query is a definition request\nexport const isDefineQuery = query => {\n  const q = query.toLowerCase().trim();\n  return q.startsWith('define') || q.startsWith('what is') || q.startsWith('meaning of');\n};\n\n// Extract word to define\nexport const extractDefineWord = query => {\n  const q = query.toLowerCase().trim();\n  return q.replace(/define/gi, '').replace(/what is/gi, '').replace(/meaning of/gi, '').replace(/the/gi, '').trim();\n};\n\n// Check if query should show knowledge card\nexport const isKnowledgeQuery = query => {\n  const knowledgeTopics = ['tesla', 'india', 'python', 'javascript', 'react', 'google', 'apple', 'microsoft', 'amazon', 'facebook'];\n  const q = query.toLowerCase().trim();\n  return knowledgeTopics.some(topic => q === topic || q.startsWith(topic + ' '));\n};\nexport default {\n  isWeatherQuery,\n  extractCity,\n  isMathQuery,\n  evaluateMath,\n  isTimeQuery,\n  extractTimeLocation,\n  isDefineQuery,\n  extractDefineWord,\n  isKnowledgeQuery\n};","map":{"version":3,"names":["isWeatherQuery","query","q","toLowerCase","trim","includes","startsWith","endsWith","extractCity","city","replace","isMathQuery","mathPattern","test","evaluateMath","sanitized","depth","char","result","Function","isFinite","isTimeQuery","extractTimeLocation","isDefineQuery","extractDefineWord","isKnowledgeQuery","knowledgeTopics","some","topic"],"sources":["C:/Users/AME/claude-local-app/google-search-app/src/utils/queryParser.js"],"sourcesContent":["/**\r\n * Parse query to determine what type of special card to show\r\n */\r\n\r\n// Check if query is asking for weather\r\nexport const isWeatherQuery = (query) => {\r\n    const q = query.toLowerCase().trim();\r\n    return q.includes('weather') || q.startsWith('weather in') || q.endsWith('weather');\r\n};\r\n\r\n// Extract city from weather query\r\nexport const extractCity = (query) => {\r\n    const q = query.toLowerCase().trim();\r\n    // \"weather in chicago\" or \"chicago weather\"\r\n    let city = q.replace(/weather/gi, '').replace(/in/gi, '').trim();\r\n    return city || 'New York'; // default\r\n};\r\n\r\n// Check if query is a math expression\r\nexport const isMathQuery = (query) => {\r\n    const q = query.trim();\r\n    // Only allow digits, operators, parentheses, spaces, decimal points\r\n    const mathPattern = /^[\\d\\s+\\-*/().]+$/;\r\n    if (!mathPattern.test(q)) return false;\r\n    // Must have at least one operator\r\n    return /[+\\-*/]/.test(q);\r\n};\r\n\r\n// Safely evaluate math expression (no eval!)\r\nexport const evaluateMath = (query) => {\r\n    try {\r\n        const q = query.trim();\r\n        // Validate again\r\n        if (!/^[\\d\\s+\\-*/().]+$/.test(q)) return null;\r\n\r\n        // Use Function constructor with strict validation\r\n        // This is safer than eval but still evaluates only math\r\n        const sanitized = q.replace(/[^0-9+\\-*/().]/g, '');\r\n\r\n        // Additional safety: check for balanced parentheses\r\n        let depth = 0;\r\n        for (const char of sanitized) {\r\n            if (char === '(') depth++;\r\n            if (char === ')') depth--;\r\n            if (depth < 0) return null;\r\n        }\r\n        if (depth !== 0) return null;\r\n\r\n        // Evaluate using Function (safer than eval, no access to scope)\r\n        const result = new Function(`return (${sanitized})`)();\r\n\r\n        if (typeof result !== 'number' || !isFinite(result)) return null;\r\n        return result;\r\n    } catch {\r\n        return null;\r\n    }\r\n};\r\n\r\n// Check if query is asking for time\r\nexport const isTimeQuery = (query) => {\r\n    const q = query.toLowerCase().trim();\r\n    return q.startsWith('time in') || q.startsWith('what time') || q.includes('current time');\r\n};\r\n\r\n// Extract location from time query\r\nexport const extractTimeLocation = (query) => {\r\n    const q = query.toLowerCase().trim();\r\n    return q.replace(/time in/gi, '').replace(/what time/gi, '').replace(/current time/gi, '').replace(/is it in/gi, '').trim() || 'UTC';\r\n};\r\n\r\n// Check if query is a definition request\r\nexport const isDefineQuery = (query) => {\r\n    const q = query.toLowerCase().trim();\r\n    return q.startsWith('define') || q.startsWith('what is') || q.startsWith('meaning of');\r\n};\r\n\r\n// Extract word to define\r\nexport const extractDefineWord = (query) => {\r\n    const q = query.toLowerCase().trim();\r\n    return q.replace(/define/gi, '').replace(/what is/gi, '').replace(/meaning of/gi, '').replace(/the/gi, '').trim();\r\n};\r\n\r\n// Check if query should show knowledge card\r\nexport const isKnowledgeQuery = (query) => {\r\n    const knowledgeTopics = ['tesla', 'india', 'python', 'javascript', 'react', 'google', 'apple', 'microsoft', 'amazon', 'facebook'];\r\n    const q = query.toLowerCase().trim();\r\n    return knowledgeTopics.some(topic => q === topic || q.startsWith(topic + ' '));\r\n};\r\n\r\nexport default {\r\n    isWeatherQuery,\r\n    extractCity,\r\n    isMathQuery,\r\n    evaluateMath,\r\n    isTimeQuery,\r\n    extractTimeLocation,\r\n    isDefineQuery,\r\n    extractDefineWord,\r\n    isKnowledgeQuery,\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}