{"ast":null,"code":"/**\r\n * Parse query to determine what type of special card to show\r\n */// Check if query is asking for weather\nexport const isWeatherQuery=query=>{const q=query.toLowerCase().trim();return q.includes('weather')||q.startsWith('weather in')||q.endsWith('weather');};// Extract city from weather query\nexport const extractCity=query=>{const q=query.toLowerCase().trim();// \"weather in chicago\" or \"chicago weather\"\nlet city=q.replace(/weather/gi,'').replace(/in/gi,'').trim();return city||'New York';// default\n};// Check if query is a math expression\nexport const isMathQuery=query=>{const q=query.trim();// Only allow digits, operators, parentheses, spaces, decimal points\nconst mathPattern=/^[\\d\\s+\\-*/().]+$/;if(!mathPattern.test(q))return false;// Must have at least one operator\nreturn /[+\\-*/]/.test(q);};// Safely evaluate math expression (no eval!)\nexport const evaluateMath=query=>{try{const q=query.trim();// Validate again\nif(!/^[\\d\\s+\\-*/().]+$/.test(q))return null;// Use Function constructor with strict validation\n// This is safer than eval but still evaluates only math\nconst sanitized=q.replace(/[^0-9+\\-*/().]/g,'');// Additional safety: check for balanced parentheses\nlet depth=0;for(const char of sanitized){if(char==='(')depth++;if(char===')')depth--;if(depth<0)return null;}if(depth!==0)return null;// Evaluate using Function (safer than eval, no access to scope)\nconst result=new Function(\"return (\".concat(sanitized,\")\"))();if(typeof result!=='number'||!isFinite(result))return null;return result;}catch(_unused){return null;}};// Check if query is asking for time\nexport const isTimeQuery=query=>{const q=query.toLowerCase().trim();return q.startsWith('time in')||q.startsWith('what time')||q.includes('current time');};// Extract location from time query\nexport const extractTimeLocation=query=>{const q=query.toLowerCase().trim();return q.replace(/time in/gi,'').replace(/what time/gi,'').replace(/current time/gi,'').replace(/is it in/gi,'').trim()||'UTC';};// Check if query is a definition request\nexport const isDefineQuery=query=>{const q=query.toLowerCase().trim();return q.startsWith('define')||q.startsWith('what is')||q.startsWith('meaning of');};// Extract word to define\nexport const extractDefineWord=query=>{const q=query.toLowerCase().trim();return q.replace(/define/gi,'').replace(/what is/gi,'').replace(/meaning of/gi,'').replace(/the/gi,'').trim();};// Check if query should show knowledge card\nexport const isKnowledgeQuery=query=>{const knowledgeTopics=['tesla','india','python','javascript','react','google','apple','microsoft','amazon','facebook'];const q=query.toLowerCase().trim();return knowledgeTopics.some(topic=>q===topic||q.startsWith(topic+' '));};export default{isWeatherQuery,extractCity,isMathQuery,evaluateMath,isTimeQuery,extractTimeLocation,isDefineQuery,extractDefineWord,isKnowledgeQuery};","map":{"version":3,"names":["isWeatherQuery","query","q","toLowerCase","trim","includes","startsWith","endsWith","extractCity","city","replace","isMathQuery","mathPattern","test","evaluateMath","sanitized","depth","char","result","Function","concat","isFinite","_unused","isTimeQuery","extractTimeLocation","isDefineQuery","extractDefineWord","isKnowledgeQuery","knowledgeTopics","some","topic"],"sources":["C:/Users/AME/claude-local-app/google-search-app/src/utils/queryParser.js"],"sourcesContent":["/**\r\n * Parse query to determine what type of special card to show\r\n */\r\n\r\n// Check if query is asking for weather\r\nexport const isWeatherQuery = (query) => {\r\n    const q = query.toLowerCase().trim();\r\n    return q.includes('weather') || q.startsWith('weather in') || q.endsWith('weather');\r\n};\r\n\r\n// Extract city from weather query\r\nexport const extractCity = (query) => {\r\n    const q = query.toLowerCase().trim();\r\n    // \"weather in chicago\" or \"chicago weather\"\r\n    let city = q.replace(/weather/gi, '').replace(/in/gi, '').trim();\r\n    return city || 'New York'; // default\r\n};\r\n\r\n// Check if query is a math expression\r\nexport const isMathQuery = (query) => {\r\n    const q = query.trim();\r\n    // Only allow digits, operators, parentheses, spaces, decimal points\r\n    const mathPattern = /^[\\d\\s+\\-*/().]+$/;\r\n    if (!mathPattern.test(q)) return false;\r\n    // Must have at least one operator\r\n    return /[+\\-*/]/.test(q);\r\n};\r\n\r\n// Safely evaluate math expression (no eval!)\r\nexport const evaluateMath = (query) => {\r\n    try {\r\n        const q = query.trim();\r\n        // Validate again\r\n        if (!/^[\\d\\s+\\-*/().]+$/.test(q)) return null;\r\n\r\n        // Use Function constructor with strict validation\r\n        // This is safer than eval but still evaluates only math\r\n        const sanitized = q.replace(/[^0-9+\\-*/().]/g, '');\r\n\r\n        // Additional safety: check for balanced parentheses\r\n        let depth = 0;\r\n        for (const char of sanitized) {\r\n            if (char === '(') depth++;\r\n            if (char === ')') depth--;\r\n            if (depth < 0) return null;\r\n        }\r\n        if (depth !== 0) return null;\r\n\r\n        // Evaluate using Function (safer than eval, no access to scope)\r\n        const result = new Function(`return (${sanitized})`)();\r\n\r\n        if (typeof result !== 'number' || !isFinite(result)) return null;\r\n        return result;\r\n    } catch {\r\n        return null;\r\n    }\r\n};\r\n\r\n// Check if query is asking for time\r\nexport const isTimeQuery = (query) => {\r\n    const q = query.toLowerCase().trim();\r\n    return q.startsWith('time in') || q.startsWith('what time') || q.includes('current time');\r\n};\r\n\r\n// Extract location from time query\r\nexport const extractTimeLocation = (query) => {\r\n    const q = query.toLowerCase().trim();\r\n    return q.replace(/time in/gi, '').replace(/what time/gi, '').replace(/current time/gi, '').replace(/is it in/gi, '').trim() || 'UTC';\r\n};\r\n\r\n// Check if query is a definition request\r\nexport const isDefineQuery = (query) => {\r\n    const q = query.toLowerCase().trim();\r\n    return q.startsWith('define') || q.startsWith('what is') || q.startsWith('meaning of');\r\n};\r\n\r\n// Extract word to define\r\nexport const extractDefineWord = (query) => {\r\n    const q = query.toLowerCase().trim();\r\n    return q.replace(/define/gi, '').replace(/what is/gi, '').replace(/meaning of/gi, '').replace(/the/gi, '').trim();\r\n};\r\n\r\n// Check if query should show knowledge card\r\nexport const isKnowledgeQuery = (query) => {\r\n    const knowledgeTopics = ['tesla', 'india', 'python', 'javascript', 'react', 'google', 'apple', 'microsoft', 'amazon', 'facebook'];\r\n    const q = query.toLowerCase().trim();\r\n    return knowledgeTopics.some(topic => q === topic || q.startsWith(topic + ' '));\r\n};\r\n\r\nexport default {\r\n    isWeatherQuery,\r\n    extractCity,\r\n    isMathQuery,\r\n    evaluateMath,\r\n    isTimeQuery,\r\n    extractTimeLocation,\r\n    isDefineQuery,\r\n    extractDefineWord,\r\n    isKnowledgeQuery,\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}