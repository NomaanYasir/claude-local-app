{"ast":null,"code":"/**\r\n * Weather API using Open-Meteo (free, no API key required)\r\n */\n\nconst GEOCODING_API = 'https://geocoding-api.open-meteo.com/v1/search';\nconst WEATHER_API = 'https://api.open-meteo.com/v1/forecast';\nconst CACHE_KEY = 'weather_cache';\nconst CACHE_DURATION = 30 * 60 * 1000; // 30 minutes\n\n/**\r\n * Get coordinates for a city\r\n */\nexport const geocodeCity = async city => {\n  try {\n    const response = await fetch(`${GEOCODING_API}?name=${encodeURIComponent(city)}&count=1`);\n    if (!response.ok) throw new Error('Geocoding failed');\n    const data = await response.json();\n    if (!data.results || data.results.length === 0) {\n      throw new Error('City not found');\n    }\n    const result = data.results[0];\n    return {\n      latitude: result.latitude,\n      longitude: result.longitude,\n      name: result.name,\n      country: result.country\n    };\n  } catch (error) {\n    console.error('Geocoding error:', error);\n    throw error;\n  }\n};\n\n/**\r\n * Get weather for coordinates\r\n */\nexport const getWeather = async (latitude, longitude) => {\n  try {\n    const params = new URLSearchParams({\n      latitude,\n      longitude,\n      current: 'temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m',\n      temperature_unit: 'fahrenheit',\n      wind_speed_unit: 'mph'\n    });\n    const response = await fetch(`${WEATHER_API}?${params}`);\n    if (!response.ok) throw new Error('Weather fetch failed');\n    const data = await response.json();\n    return {\n      temperature: Math.round(data.current.temperature_2m),\n      humidity: data.current.relative_humidity_2m,\n      weatherCode: data.current.weather_code,\n      windSpeed: Math.round(data.current.wind_speed_10m)\n    };\n  } catch (error) {\n    console.error('Weather error:', error);\n    throw error;\n  }\n};\n\n/**\r\n * Get weather description from WMO code\r\n */\nexport const getWeatherDescription = code => {\n  const descriptions = {\n    0: 'Clear sky',\n    1: 'Mainly clear',\n    2: 'Partly cloudy',\n    3: 'Overcast',\n    45: 'Foggy',\n    48: 'Depositing rime fog',\n    51: 'Light drizzle',\n    53: 'Moderate drizzle',\n    55: 'Dense drizzle',\n    61: 'Slight rain',\n    63: 'Moderate rain',\n    65: 'Heavy rain',\n    71: 'Slight snow',\n    73: 'Moderate snow',\n    75: 'Heavy snow',\n    80: 'Slight rain showers',\n    81: 'Moderate rain showers',\n    82: 'Violent rain showers',\n    95: 'Thunderstorm',\n    96: 'Thunderstorm with hail'\n  };\n  return descriptions[code] || 'Unknown';\n};\n\n/**\r\n * Get weather emoji from WMO code\r\n */\nexport const getWeatherEmoji = code => {\n  if (code === 0) return '‚òÄÔ∏è';\n  if (code <= 3) return '‚õÖ';\n  if (code <= 48) return 'üå´Ô∏è';\n  if (code <= 55) return 'üåßÔ∏è';\n  if (code <= 65) return 'üåßÔ∏è';\n  if (code <= 75) return '‚ùÑÔ∏è';\n  if (code <= 82) return 'üå¶Ô∏è';\n  if (code >= 95) return '‚õàÔ∏è';\n  return 'üå§Ô∏è';\n};\n\n/**\r\n * Fetch weather for a city with caching\r\n */\nexport const fetchWeatherForCity = async city => {\n  // Check cache first\n  try {\n    const cached = localStorage.getItem(CACHE_KEY);\n    if (cached) {\n      const {\n        data,\n        timestamp,\n        cachedCity\n      } = JSON.parse(cached);\n      if (cachedCity.toLowerCase() === city.toLowerCase() && Date.now() - timestamp < CACHE_DURATION) {\n        return {\n          ...data,\n          fromCache: true\n        };\n      }\n    }\n  } catch (e) {\n    // Ignore cache errors\n  }\n\n  // Fetch fresh data\n  const location = await geocodeCity(city);\n  const weather = await getWeather(location.latitude, location.longitude);\n  const result = {\n    city: location.name,\n    country: location.country,\n    temperature: weather.temperature,\n    humidity: weather.humidity,\n    description: getWeatherDescription(weather.weatherCode),\n    emoji: getWeatherEmoji(weather.weatherCode),\n    windSpeed: weather.windSpeed,\n    fromCache: false\n  };\n\n  // Save to cache\n  try {\n    localStorage.setItem(CACHE_KEY, JSON.stringify({\n      data: result,\n      timestamp: Date.now(),\n      cachedCity: city\n    }));\n  } catch (e) {\n    // Ignore cache errors\n  }\n  return result;\n};\n\n/**\r\n * Get cached weather (for offline use)\r\n */\nexport const getCachedWeather = () => {\n  try {\n    const cached = localStorage.getItem(CACHE_KEY);\n    if (cached) {\n      const {\n        data\n      } = JSON.parse(cached);\n      return {\n        ...data,\n        fromCache: true,\n        isStale: true\n      };\n    }\n  } catch (e) {\n    // Ignore\n  }\n  return null;\n};\nexport default fetchWeatherForCity;","map":{"version":3,"names":["GEOCODING_API","WEATHER_API","CACHE_KEY","CACHE_DURATION","geocodeCity","city","response","fetch","encodeURIComponent","ok","Error","data","json","results","length","result","latitude","longitude","name","country","error","console","getWeather","params","URLSearchParams","current","temperature_unit","wind_speed_unit","temperature","Math","round","temperature_2m","humidity","relative_humidity_2m","weatherCode","weather_code","windSpeed","wind_speed_10m","getWeatherDescription","code","descriptions","getWeatherEmoji","fetchWeatherForCity","cached","localStorage","getItem","timestamp","cachedCity","JSON","parse","toLowerCase","Date","now","fromCache","e","location","weather","description","emoji","setItem","stringify","getCachedWeather","isStale"],"sources":["C:/Users/AME/claude-local-app/google-search-app/src/utils/weatherApi.js"],"sourcesContent":["/**\r\n * Weather API using Open-Meteo (free, no API key required)\r\n */\r\n\r\nconst GEOCODING_API = 'https://geocoding-api.open-meteo.com/v1/search';\r\nconst WEATHER_API = 'https://api.open-meteo.com/v1/forecast';\r\n\r\nconst CACHE_KEY = 'weather_cache';\r\nconst CACHE_DURATION = 30 * 60 * 1000; // 30 minutes\r\n\r\n/**\r\n * Get coordinates for a city\r\n */\r\nexport const geocodeCity = async (city) => {\r\n    try {\r\n        const response = await fetch(`${GEOCODING_API}?name=${encodeURIComponent(city)}&count=1`);\r\n        if (!response.ok) throw new Error('Geocoding failed');\r\n\r\n        const data = await response.json();\r\n        if (!data.results || data.results.length === 0) {\r\n            throw new Error('City not found');\r\n        }\r\n\r\n        const result = data.results[0];\r\n        return {\r\n            latitude: result.latitude,\r\n            longitude: result.longitude,\r\n            name: result.name,\r\n            country: result.country,\r\n        };\r\n    } catch (error) {\r\n        console.error('Geocoding error:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get weather for coordinates\r\n */\r\nexport const getWeather = async (latitude, longitude) => {\r\n    try {\r\n        const params = new URLSearchParams({\r\n            latitude,\r\n            longitude,\r\n            current: 'temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m',\r\n            temperature_unit: 'fahrenheit',\r\n            wind_speed_unit: 'mph',\r\n        });\r\n\r\n        const response = await fetch(`${WEATHER_API}?${params}`);\r\n        if (!response.ok) throw new Error('Weather fetch failed');\r\n\r\n        const data = await response.json();\r\n        return {\r\n            temperature: Math.round(data.current.temperature_2m),\r\n            humidity: data.current.relative_humidity_2m,\r\n            weatherCode: data.current.weather_code,\r\n            windSpeed: Math.round(data.current.wind_speed_10m),\r\n        };\r\n    } catch (error) {\r\n        console.error('Weather error:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get weather description from WMO code\r\n */\r\nexport const getWeatherDescription = (code) => {\r\n    const descriptions = {\r\n        0: 'Clear sky',\r\n        1: 'Mainly clear',\r\n        2: 'Partly cloudy',\r\n        3: 'Overcast',\r\n        45: 'Foggy',\r\n        48: 'Depositing rime fog',\r\n        51: 'Light drizzle',\r\n        53: 'Moderate drizzle',\r\n        55: 'Dense drizzle',\r\n        61: 'Slight rain',\r\n        63: 'Moderate rain',\r\n        65: 'Heavy rain',\r\n        71: 'Slight snow',\r\n        73: 'Moderate snow',\r\n        75: 'Heavy snow',\r\n        80: 'Slight rain showers',\r\n        81: 'Moderate rain showers',\r\n        82: 'Violent rain showers',\r\n        95: 'Thunderstorm',\r\n        96: 'Thunderstorm with hail',\r\n    };\r\n    return descriptions[code] || 'Unknown';\r\n};\r\n\r\n/**\r\n * Get weather emoji from WMO code\r\n */\r\nexport const getWeatherEmoji = (code) => {\r\n    if (code === 0) return '‚òÄÔ∏è';\r\n    if (code <= 3) return '‚õÖ';\r\n    if (code <= 48) return 'üå´Ô∏è';\r\n    if (code <= 55) return 'üåßÔ∏è';\r\n    if (code <= 65) return 'üåßÔ∏è';\r\n    if (code <= 75) return '‚ùÑÔ∏è';\r\n    if (code <= 82) return 'üå¶Ô∏è';\r\n    if (code >= 95) return '‚õàÔ∏è';\r\n    return 'üå§Ô∏è';\r\n};\r\n\r\n/**\r\n * Fetch weather for a city with caching\r\n */\r\nexport const fetchWeatherForCity = async (city) => {\r\n    // Check cache first\r\n    try {\r\n        const cached = localStorage.getItem(CACHE_KEY);\r\n        if (cached) {\r\n            const { data, timestamp, cachedCity } = JSON.parse(cached);\r\n            if (cachedCity.toLowerCase() === city.toLowerCase() &&\r\n                Date.now() - timestamp < CACHE_DURATION) {\r\n                return { ...data, fromCache: true };\r\n            }\r\n        }\r\n    } catch (e) {\r\n        // Ignore cache errors\r\n    }\r\n\r\n    // Fetch fresh data\r\n    const location = await geocodeCity(city);\r\n    const weather = await getWeather(location.latitude, location.longitude);\r\n\r\n    const result = {\r\n        city: location.name,\r\n        country: location.country,\r\n        temperature: weather.temperature,\r\n        humidity: weather.humidity,\r\n        description: getWeatherDescription(weather.weatherCode),\r\n        emoji: getWeatherEmoji(weather.weatherCode),\r\n        windSpeed: weather.windSpeed,\r\n        fromCache: false,\r\n    };\r\n\r\n    // Save to cache\r\n    try {\r\n        localStorage.setItem(CACHE_KEY, JSON.stringify({\r\n            data: result,\r\n            timestamp: Date.now(),\r\n            cachedCity: city,\r\n        }));\r\n    } catch (e) {\r\n        // Ignore cache errors\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n/**\r\n * Get cached weather (for offline use)\r\n */\r\nexport const getCachedWeather = () => {\r\n    try {\r\n        const cached = localStorage.getItem(CACHE_KEY);\r\n        if (cached) {\r\n            const { data } = JSON.parse(cached);\r\n            return { ...data, fromCache: true, isStale: true };\r\n        }\r\n    } catch (e) {\r\n        // Ignore\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default fetchWeatherForCity;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}