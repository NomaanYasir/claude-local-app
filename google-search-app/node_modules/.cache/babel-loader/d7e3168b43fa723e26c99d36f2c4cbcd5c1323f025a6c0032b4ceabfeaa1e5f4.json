{"ast":null,"code":"import _objectSpread from\"C:/Users/AME/claude-local-app/google-search-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/**\r\n * Weather API using Open-Meteo (free, no API key required)\r\n */const GEOCODING_API='https://geocoding-api.open-meteo.com/v1/search';const WEATHER_API='https://api.open-meteo.com/v1/forecast';const CACHE_KEY='weather_cache';const CACHE_DURATION=30*60*1000;// 30 minutes\n/**\r\n * Get coordinates for a city\r\n */export const geocodeCity=async city=>{try{const response=await fetch(\"\".concat(GEOCODING_API,\"?name=\").concat(encodeURIComponent(city),\"&count=1\"));if(!response.ok)throw new Error('Geocoding failed');const data=await response.json();if(!data.results||data.results.length===0){throw new Error('City not found');}const result=data.results[0];return{latitude:result.latitude,longitude:result.longitude,name:result.name,country:result.country};}catch(error){console.error('Geocoding error:',error);throw error;}};/**\r\n * Get weather for coordinates\r\n */export const getWeather=async(latitude,longitude)=>{try{const params=new URLSearchParams({latitude,longitude,current:'temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m',temperature_unit:'fahrenheit',wind_speed_unit:'mph'});const response=await fetch(\"\".concat(WEATHER_API,\"?\").concat(params));if(!response.ok)throw new Error('Weather fetch failed');const data=await response.json();return{temperature:Math.round(data.current.temperature_2m),humidity:data.current.relative_humidity_2m,weatherCode:data.current.weather_code,windSpeed:Math.round(data.current.wind_speed_10m)};}catch(error){console.error('Weather error:',error);throw error;}};/**\r\n * Get weather description from WMO code\r\n */export const getWeatherDescription=code=>{const descriptions={0:'Clear sky',1:'Mainly clear',2:'Partly cloudy',3:'Overcast',45:'Foggy',48:'Depositing rime fog',51:'Light drizzle',53:'Moderate drizzle',55:'Dense drizzle',61:'Slight rain',63:'Moderate rain',65:'Heavy rain',71:'Slight snow',73:'Moderate snow',75:'Heavy snow',80:'Slight rain showers',81:'Moderate rain showers',82:'Violent rain showers',95:'Thunderstorm',96:'Thunderstorm with hail'};return descriptions[code]||'Unknown';};/**\r\n * Get weather emoji from WMO code\r\n */export const getWeatherEmoji=code=>{if(code===0)return'‚òÄÔ∏è';if(code<=3)return'‚õÖ';if(code<=48)return'üå´Ô∏è';if(code<=55)return'üåßÔ∏è';if(code<=65)return'üåßÔ∏è';if(code<=75)return'‚ùÑÔ∏è';if(code<=82)return'üå¶Ô∏è';if(code>=95)return'‚õàÔ∏è';return'üå§Ô∏è';};/**\r\n * Fetch weather for a city with caching\r\n */export const fetchWeatherForCity=async city=>{// Check cache first\ntry{const cached=localStorage.getItem(CACHE_KEY);if(cached){const{data,timestamp,cachedCity}=JSON.parse(cached);if(cachedCity.toLowerCase()===city.toLowerCase()&&Date.now()-timestamp<CACHE_DURATION){return _objectSpread(_objectSpread({},data),{},{fromCache:true});}}}catch(e){// Ignore cache errors\n}// Fetch fresh data\nconst location=await geocodeCity(city);const weather=await getWeather(location.latitude,location.longitude);const result={city:location.name,country:location.country,temperature:weather.temperature,humidity:weather.humidity,description:getWeatherDescription(weather.weatherCode),emoji:getWeatherEmoji(weather.weatherCode),windSpeed:weather.windSpeed,fromCache:false};// Save to cache\ntry{localStorage.setItem(CACHE_KEY,JSON.stringify({data:result,timestamp:Date.now(),cachedCity:city}));}catch(e){// Ignore cache errors\n}return result;};/**\r\n * Get cached weather (for offline use)\r\n */export const getCachedWeather=()=>{try{const cached=localStorage.getItem(CACHE_KEY);if(cached){const{data}=JSON.parse(cached);return _objectSpread(_objectSpread({},data),{},{fromCache:true,isStale:true});}}catch(e){// Ignore\n}return null;};export default fetchWeatherForCity;","map":{"version":3,"names":["GEOCODING_API","WEATHER_API","CACHE_KEY","CACHE_DURATION","geocodeCity","city","response","fetch","concat","encodeURIComponent","ok","Error","data","json","results","length","result","latitude","longitude","name","country","error","console","getWeather","params","URLSearchParams","current","temperature_unit","wind_speed_unit","temperature","Math","round","temperature_2m","humidity","relative_humidity_2m","weatherCode","weather_code","windSpeed","wind_speed_10m","getWeatherDescription","code","descriptions","getWeatherEmoji","fetchWeatherForCity","cached","localStorage","getItem","timestamp","cachedCity","JSON","parse","toLowerCase","Date","now","_objectSpread","fromCache","e","location","weather","description","emoji","setItem","stringify","getCachedWeather","isStale"],"sources":["C:/Users/AME/claude-local-app/google-search-app/src/utils/weatherApi.js"],"sourcesContent":["/**\r\n * Weather API using Open-Meteo (free, no API key required)\r\n */\r\n\r\nconst GEOCODING_API = 'https://geocoding-api.open-meteo.com/v1/search';\r\nconst WEATHER_API = 'https://api.open-meteo.com/v1/forecast';\r\n\r\nconst CACHE_KEY = 'weather_cache';\r\nconst CACHE_DURATION = 30 * 60 * 1000; // 30 minutes\r\n\r\n/**\r\n * Get coordinates for a city\r\n */\r\nexport const geocodeCity = async (city) => {\r\n    try {\r\n        const response = await fetch(`${GEOCODING_API}?name=${encodeURIComponent(city)}&count=1`);\r\n        if (!response.ok) throw new Error('Geocoding failed');\r\n\r\n        const data = await response.json();\r\n        if (!data.results || data.results.length === 0) {\r\n            throw new Error('City not found');\r\n        }\r\n\r\n        const result = data.results[0];\r\n        return {\r\n            latitude: result.latitude,\r\n            longitude: result.longitude,\r\n            name: result.name,\r\n            country: result.country,\r\n        };\r\n    } catch (error) {\r\n        console.error('Geocoding error:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get weather for coordinates\r\n */\r\nexport const getWeather = async (latitude, longitude) => {\r\n    try {\r\n        const params = new URLSearchParams({\r\n            latitude,\r\n            longitude,\r\n            current: 'temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m',\r\n            temperature_unit: 'fahrenheit',\r\n            wind_speed_unit: 'mph',\r\n        });\r\n\r\n        const response = await fetch(`${WEATHER_API}?${params}`);\r\n        if (!response.ok) throw new Error('Weather fetch failed');\r\n\r\n        const data = await response.json();\r\n        return {\r\n            temperature: Math.round(data.current.temperature_2m),\r\n            humidity: data.current.relative_humidity_2m,\r\n            weatherCode: data.current.weather_code,\r\n            windSpeed: Math.round(data.current.wind_speed_10m),\r\n        };\r\n    } catch (error) {\r\n        console.error('Weather error:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n/**\r\n * Get weather description from WMO code\r\n */\r\nexport const getWeatherDescription = (code) => {\r\n    const descriptions = {\r\n        0: 'Clear sky',\r\n        1: 'Mainly clear',\r\n        2: 'Partly cloudy',\r\n        3: 'Overcast',\r\n        45: 'Foggy',\r\n        48: 'Depositing rime fog',\r\n        51: 'Light drizzle',\r\n        53: 'Moderate drizzle',\r\n        55: 'Dense drizzle',\r\n        61: 'Slight rain',\r\n        63: 'Moderate rain',\r\n        65: 'Heavy rain',\r\n        71: 'Slight snow',\r\n        73: 'Moderate snow',\r\n        75: 'Heavy snow',\r\n        80: 'Slight rain showers',\r\n        81: 'Moderate rain showers',\r\n        82: 'Violent rain showers',\r\n        95: 'Thunderstorm',\r\n        96: 'Thunderstorm with hail',\r\n    };\r\n    return descriptions[code] || 'Unknown';\r\n};\r\n\r\n/**\r\n * Get weather emoji from WMO code\r\n */\r\nexport const getWeatherEmoji = (code) => {\r\n    if (code === 0) return '‚òÄÔ∏è';\r\n    if (code <= 3) return '‚õÖ';\r\n    if (code <= 48) return 'üå´Ô∏è';\r\n    if (code <= 55) return 'üåßÔ∏è';\r\n    if (code <= 65) return 'üåßÔ∏è';\r\n    if (code <= 75) return '‚ùÑÔ∏è';\r\n    if (code <= 82) return 'üå¶Ô∏è';\r\n    if (code >= 95) return '‚õàÔ∏è';\r\n    return 'üå§Ô∏è';\r\n};\r\n\r\n/**\r\n * Fetch weather for a city with caching\r\n */\r\nexport const fetchWeatherForCity = async (city) => {\r\n    // Check cache first\r\n    try {\r\n        const cached = localStorage.getItem(CACHE_KEY);\r\n        if (cached) {\r\n            const { data, timestamp, cachedCity } = JSON.parse(cached);\r\n            if (cachedCity.toLowerCase() === city.toLowerCase() &&\r\n                Date.now() - timestamp < CACHE_DURATION) {\r\n                return { ...data, fromCache: true };\r\n            }\r\n        }\r\n    } catch (e) {\r\n        // Ignore cache errors\r\n    }\r\n\r\n    // Fetch fresh data\r\n    const location = await geocodeCity(city);\r\n    const weather = await getWeather(location.latitude, location.longitude);\r\n\r\n    const result = {\r\n        city: location.name,\r\n        country: location.country,\r\n        temperature: weather.temperature,\r\n        humidity: weather.humidity,\r\n        description: getWeatherDescription(weather.weatherCode),\r\n        emoji: getWeatherEmoji(weather.weatherCode),\r\n        windSpeed: weather.windSpeed,\r\n        fromCache: false,\r\n    };\r\n\r\n    // Save to cache\r\n    try {\r\n        localStorage.setItem(CACHE_KEY, JSON.stringify({\r\n            data: result,\r\n            timestamp: Date.now(),\r\n            cachedCity: city,\r\n        }));\r\n    } catch (e) {\r\n        // Ignore cache errors\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n/**\r\n * Get cached weather (for offline use)\r\n */\r\nexport const getCachedWeather = () => {\r\n    try {\r\n        const cached = localStorage.getItem(CACHE_KEY);\r\n        if (cached) {\r\n            const { data } = JSON.parse(cached);\r\n            return { ...data, fromCache: true, isStale: true };\r\n        }\r\n    } catch (e) {\r\n        // Ignore\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default fetchWeatherForCity;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}